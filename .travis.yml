language: rust

rust:
    - stable
    - beta
    - nightly

notifications:
    irc: "irc.mozilla.org#piston-internals"

os:
    - linux

addons:
    apt:
        packages:
            - libxxf86vm-dev
            - libosmesa6-dev

script:
    - cd core && cargo build --verbose
    - cd core && cargo test --verbose
    - cd core && cargo doc --all-features --verbose
    - cd conrod_derive && cargo b --verbose
    - cd backends/conrod_gfx && cargo test --features "conrod_winit_glue" --verbose
    - cd backends/conrod_glium && cargo test --features "conrod_winit_glue" --verbose
    - cd backends/conrod_piston && cargo test --verbose
    - cd backends/conrod_vulkano && cargo test --features "winit_example_glue" --verbose

after_success:
    - curl http://docs.piston.rs/travis-doc-upload.sh | sh
